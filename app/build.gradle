plugins {
    id 'application'
}

repositories {
    jcenter()
}

dependencies {
    testImplementation 'junit:junit:4.13'

    implementation 'org.apache.xmlgraphics:batik-transcoder:1.7'
    implementation 'org.apache.xmlgraphics:batik-codec:1.13' // needed to fix missing WriteAdapter

    implementation group: 'org.apache.logging.log4j', name: 'log4j-core', version: '2.13.3'
}

application {
    mainClass = 'imageconverter.App'
}

tasks.withType(Test) {
  testLogging {
    exceptionFormat "full"
    events "started", "skipped", "passed", "failed"
    showStandardStreams true
  }
}

sourceSets {
    test {
        java {
            srcDirs = ["src/test"]
        }
    }
}

test {
    useJUnit()
    beforeTest { descriptor ->
        logger.lifecycle("Running test: " + descriptor)
    }

    failFast = true

    onOutput { descriptor, event ->
        logger.lifecycle("Test: " + descriptor + " produced standard out/err: " + event.message )
    }
}
